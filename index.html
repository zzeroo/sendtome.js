<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io.connect('http://localhost', 3000);
    </script>
  </head>
  <body>
    <div id="drop_zone" webkitdirectory="">Drop files here</div>
    <output id="list"></output>

    <script type="text/javascript" language="javascript" charset="utf-8">
      // Check for the various File API support.
      if (window.File && window.FileReader && window.FileList && window.Blob) {
        // Great success! All the File APIs are supported.
      } else {
        alert('The File APIs are not fully supported in this browser.');
      }

      function handleFileSelect(evt) {
        evt.stopPropagation();
        evt.preventDefault();

        // files is a FileList of File objects. List some properties.
        var files = evt.dataTransfer.files; // FileList object.

        for (var i = 0, f; f = files[i]; i++) {
          socket.emit('Upload'); //, { 'Name' : f.name, Data : evt.target.result });
        }
      }

      function handleDragOver(evt) {
        evt.stopPropagation();
        evt.preventDefault();
        evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
      }

      // Setup the dnd listeners.
      var dropZone = document.getElementById('drop_zone');
      dropZone.addEventListener('dragover', handleDragOver, false);
      dropZone.addEventListener('drop', handleFileSelect, false);
    
    </script>
    <style>
      #drop_zone {
        border: 2px dashed #BBB;
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;
        border-radius: 5px;
        padding: 55px;
        text-align: center;
        font: 20pt bold,"Vollkorn";
        color: #BBB;
      }    
    </style>
  </body>
</html>
